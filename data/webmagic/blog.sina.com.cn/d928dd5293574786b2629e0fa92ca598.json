{"title":{"text":"<h2 id=\"t_58ae76e80100jp64\" class=\"titName SG_txta\">gmail联系人获取方式</h2>"},"content":{"text":"<div id=\"sina_keyword_ad_area2\" class=\"articalContent  \">\n  &nbsp;\n <wbr />&nbsp;\n <wbr /> 其实gmail联系人获取很简单，http://code.google.com/intl/zh-CN/apis/contacts/上有介绍。最通用的方法，并不是下载API来调用，而是使用网页请求的方式，获取google返回的xml文件并进行解析，所以理解好XML，基本上可以不变应万变了。\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr /> 请求GOOGLE数据首先需要认证。AuthSub proxy authentication。以下是一段PHP代码:\n <br /> function checklogin( $user, $password )\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> {\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> $data = array (\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> 'accountType' =&gt; 'GOOGLE',\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> 'Email' =&gt; $user,\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> 'Passwd' =&gt; $password,\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> 'service' =&gt; 'cp', //google 一系列api 的简写，在google 上能找到，可以换成你想要的服务简写\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> 'source' =&gt; 'test-oauth-1.0', //给你自己的应用程序命名\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> );\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> $ch = curl_init();\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> curl_setopt($ch, CURLOPT_URL, &quot;https://www.google.com/accounts/ClientLogin&quot;);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> curl_setopt($ch, CURLOPT_POST, true);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> curl_setopt($ch, CURLOPT_POSTFIELDS, $data);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> $output = curl_exec($ch);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> $info = curl_getinfo($ch);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> preg_match('/Auth=.+/', $output, $tempArray);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> if ($info['http_code'] != 200 ) {\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> return 0;\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> }\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> $auth = 'Authorization: GoogleLogin auth=' . substr($tempArray[0], 5);\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> $this-&gt;googleAuth = $auth;\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> return 1;\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr />&nbsp;\n <wbr /> }\n <br /> &nbsp;\n <wbr />&nbsp;\n <wbr /> 然后可以向http://www.google.com/m8/feeds/contacts/default/full发送请求，后面可以带参数。例如：默认的返回数最大为20多，想要改成500，则写成http://www.google.com/m8/feeds/contacts/default/full?max-results=500。\n <br /> &nbsp;\n <wbr /> 返回的XML，以一个entry标签为一条。\n <br /> \n <br /> \n</div>"},"date":{"text":"2010-07-07 15:01:40"}}